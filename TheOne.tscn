[gd_scene load_steps=15 format=3 uid="uid://0pohi0sese8q"]

[ext_resource type="Texture2D" uid="uid://cpyb2f2wlx3lv" path="res://the_one/Idle Animation Var 1 Sprite (horizontal).png" id="1_ehkj1"]
[ext_resource type="Script" uid="uid://dmeyf17a6fbxu" path="res://Players/Scripts/MainCharacter.cs" id="1_xcwry"]
[ext_resource type="Script" uid="uid://bei6tl5ussl8a" path="res://Players/Scripts/Gravity.cs" id="2_qy3el"]
[ext_resource type="Texture2D" uid="uid://cceo3205egua" path="res://images/blood_small.png" id="3_0o1tl"]
[ext_resource type="Script" uid="uid://bdmrvrxgtgyxq" path="res://Players/Scripts/TakingDamage.cs" id="4_dr2vk"]
[ext_resource type="AudioStream" uid="uid://dcoo2qwrrf5vw" path="res://sounds/sword_swing1.mp3" id="5_70clr"]
[ext_resource type="AudioStream" uid="uid://cblru0phgdg8w" path="res://sounds/jump.mp3" id="6_xcwry"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dr2vk"]
size = Vector2(32.4324, 381)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_xcwry"]
radius = 26.8652
height = 419.19

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0aqxv"]
size = Vector2(324, 180)

[sub_resource type="Animation" id="Animation_qy3el"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_ehkj1"]
resource_name = "idle"
length = 0.750013
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25, 0.375, 0.5, 0.625),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 0, 1, 4, 5]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_0o1tl"]
_data = {
&"RESET": SubResource("Animation_qy3el"),
&"idle": SubResource("Animation_ehkj1")
}

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_dr2vk"]
particle_flag_disable_z = true
direction = Vector3(0, 0, 0)
spread = 180.0
initial_velocity_max = 67.73
gravity = Vector3(0, 98, 0)
scale_min = 0.5

[node name="MainCharacter" type="CharacterBody2D"]
script = ExtResource("1_xcwry")

[node name="PhysicalShape" type="CollisionShape2D" parent="."]
position = Vector2(-29, 15.5)
scale = Vector2(10.36, 1)
shape = SubResource("RectangleShape2D_dr2vk")

[node name="Visuals" type="Node2D" parent="."]

[node name="Sprite2d" type="Sprite2D" parent="Visuals"]
texture = ExtResource("1_ehkj1")
hframes = 6

[node name="Attack1Area" type="Area2D" parent="Visuals"]
position = Vector2(0, -1)
collision_layer = 2
collision_mask = 0

[node name="Attack1Hitbox" type="CollisionShape2D" parent="Visuals/Attack1Area"]
position = Vector2(258, -1.99999)
rotation = 1.12318
scale = Vector2(1.55136, 0.771309)
shape = SubResource("CapsuleShape2D_xcwry")
disabled = true

[node name="HurtArea" type="Area2D" parent="Visuals"]
position = Vector2(0, -1)
collision_layer = 0
collision_mask = 2

[node name="HurtBox" type="CollisionShape2D" parent="Visuals/HurtArea"]
position = Vector2(-27, 21)
scale = Vector2(1, 2)
shape = SubResource("RectangleShape2D_0aqxv")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../Visuals/Sprite2d")
libraries = {
&"": SubResource("AnimationLibrary_0o1tl")
}
autoplay = "idle"

[node name="BloodEmitter" type="GPUParticles2D" parent="."]
scale = Vector2(5, 5)
emitting = false
amount = 50
texture = ExtResource("3_0o1tl")
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_dr2vk")

[node name="Logic" type="Node" parent="."]

[node name="Gravity" type="Node" parent="Logic" node_paths=PackedStringArray("MainCharacter")]
script = ExtResource("2_qy3el")
MainCharacter = NodePath("../..")

[node name="TakingDamage" type="Node" parent="Logic" node_paths=PackedStringArray("MainCharacter")]
script = ExtResource("4_dr2vk")
MainCharacter = NodePath("../..")

[node name="Sounds" type="Node2D" parent="."]

[node name="Strike" type="AudioStreamPlayer2D" parent="Sounds"]
stream = ExtResource("5_70clr")

[node name="Jump" type="AudioStreamPlayer2D" parent="Sounds"]
stream = ExtResource("6_xcwry")

[connection signal="area_entered" from="Visuals/HurtArea" to="Logic/TakingDamage" method="GetHit"]
